# 代码不朽 编写可维护软件的10大要则

## 第一章 简介

### 1.1 什么是可维护性？

国际标准ISO/IEC 25010:2011将软件质量划分为八个特征：可维护性、功能可适性、性能效率、兼容性、可使用性、可靠性、安全性、可移植性。

软件维护的四种方式：

- 发现并修复bug（纠正性维护）
- 系统需要去适应操作环境的改变（可适应性维护）
- 系统用户有新的需求，或者对之前的需求有变化（完善性维护）
- 确定可以改进质量或者预防将来可能产生的bug的方法（预防性维护）

### 1.2 为什么维护性很重要？

- 低可维护性会对业务造成严重影响
- 可维护性是其他质量特征的推动者

### 1.3 本书的三个基本理论

1. 简单的原则最有助于提高可维护性
1. 可维护性不是开发完成后才去考虑的，而应该是在项目开发的一开始就加以考虑。每一个人的贡献都应当计算在内。
1. 对各原则的违背会带来不同的影响，有些严重程度甚于其他。一个软件系统越遵守原则，可维护性越高。

### 1.4 对可维护性的误解

- 误解：可维护性与使用的语言有关
- 误解：可维护性与行业有关
- 误解：可维护性等价于Bug的数量多少
- 误解：可维护性是一个“非此即彼”的是非问题

### 1.5 评价可维护性

### 1.6 可维护性原则的概述

- 编写短小的代码单元。短小的代码单元更易于分析、测试和重用。
- 编写简单的代码单元。拥有更少决策点的代码单元更易于分析和测试。
- 不写重复代码。任何时候都应该避免源代码重复使用，因为修改时就需要对每处代码都进行修改。重复代码也是产生回归bug的一个来源。
- 保持代码单元的接口简单。含有更少参数的代码单元更易于测试和重用。
- 分离模块之间的关注点。松耦合的模块更易于修改，也利于构建更加模块化的系统。
- 架构组件松耦合。系统的顶层组件之间越是松耦合，越易于修改，也利于构建更加模块化的系统。
- 保持架构组件之间的平衡。一个平衡度很好的架构拥有不多不少的组件、统一的代码规模以及最大程度的模块化，并通过隔离关注点使得修改变得很容易。
- 保持小规模代码库。大型系统之所以难以维护，因为需要分析、修改并测试更多的代码。同样，大型系统中维护每一行代码的效率也比小型系统要低。
- 自动化开发部署和测试。自动化测试可以得到对修改的有效性的即时反馈。手工测试无法形成规模。
- 编写简洁的代码。代码库中存在越多的TODO、无用代码等遗留产物，新的团队成员就越难高效工作，从而影响维护工作的效率。

